# Shinzo Web Demo App - Ethereum Log Viewer

The demo app leverages the app-sdk to create a simple web app that reads and displays transaction hashes from two Views: one that simply extracts the transaction hashes from logs (applying no Lenses) and another that does the same and then also runs a Lens transform that filters the transaction hashes for those that were from a specific address. The demo web app is meant to showcase, along with the Indexer and Host client apps, how data is transformed, transmitted, and accessed accross the Shinzo ecosystem. This demo web app, and the remainder of this readme, were entirely generated by AI. 

A beautiful, real-time web dashboard for viewing Ethereum logs synchronized via the Shinzo network.

![Dashboard Preview](preview.png)

## Features

✨ **Real-Time Updates**: Live data streaming using Server-Sent Events (SSE)
🎨 **Modern UI**: Sleek dark theme with smooth animations
📊 **Live Statistics**: Track total logs, filter efficiency, and uptime
🔍 **Dual Views**: Compare unfiltered logs vs. filtered logs (with lens processing)
⚡ **Auto-Refresh**: Data updates every 3 seconds automatically
📱 **Responsive**: Works on desktop, tablet, and mobile devices

## Quick Start

### Prerequisites

Make sure these services are running:

1. **bigPeer** (bootstrap node) - Port 9176
2. **indexer** (data source) - Port 9181-9182
3. **host** (view processor) - Port 9180/9183

See [TROUBLESHOOTING.md](../TROUBLESHOOTING.md) for setup details.

### Start the Web App

```bash
cd /Users/quinnpurdy/Documents/repos/demoWebApp
go run cmd/main.go
```

### Open in Browser

Once started, open your browser to:

```
http://localhost:8080
```

You'll see a beautiful dashboard with real-time Ethereum log data!

## Architecture

```
┌─────────────┐       ┌─────────────┐       ┌─────────────┐
│   Indexer   │──────▶│   BigPeer   │◀──────│    Host     │
│  (Data      │       │  (Bootstrap)│       │  (Views &   │
│   Source)   │       │             │       │   Lenses)   │
└─────────────┘       └─────────────┘       └─────────────┘
                              │
                              ▼
                      ┌─────────────┐
                      │ Web Demo    │
                      │   :8080     │
                      └─────────────┘
                              │
                              ▼
                      ┌─────────────┐
                      │   Browser   │
                      │  (You!)     │
                      └─────────────┘
```

### How It Works

1. **Backend (Go)**:
   - Connects to the Shinzo P2P network
   - Subscribes to views from the host
   - Serves HTTP endpoints and static files
   - Streams real-time updates via SSE

2. **Frontend (JavaScript)**:
   - Connects to SSE endpoint
   - Receives data updates every 3 seconds
   - Renders beautiful UI with live data
   - Auto-reconnects if connection drops

## API Endpoints

### `GET /`
Serves the main HTML page.

### `GET /api/data`
Returns current dashboard data as JSON:
```json
{
  "unfilteredLogs": [...],
  "filteredLogs": [...],
  "stats": {
    "unfilteredCount": 5,
    "filteredCount": 2,
    "startTime": "2025-10-08T11:00:00Z",
    "lastUpdate": "2025-10-08T11:05:23Z"
  },
  "uptime": "5m 23s",
  "lastUpdateAgo": "2s ago",
  "filterRatio": "40.0%"
}
```

### `GET /api/stream`
Server-Sent Events endpoint for real-time updates.

### `GET /static/*`
Serves static files (CSS, JavaScript).

## Dashboard Sections

### 📊 System Status
- **Uptime**: How long the app has been running
- **Last Update**: Time since last data refresh
- **Connection**: Real-time connection status with pulse animation

### 📋 Unfiltered Logs (Purple)
Shows the latest 5 logs received from the network without any filtering.

### 🔍 Filtered Logs (Green)
Shows the latest 5 logs that passed through the lens filter.

### 📈 Statistics (Yellow)
- **Total Unfiltered Logs**: Count of all logs received
- **Total Filtered Logs**: Count of logs after lens processing
- **Filter Efficiency**: Percentage showing how selective the lens is

## Customization

### Change Port

Edit `cmd/main.go` line 66:
```go
port := ":8080"  // Change to your preferred port
```

### Change Update Frequency

Edit `cmd/main.go` line 99:
```go
ticker := time.NewTicker(3 * time.Second)  // Change duration
```

### Change Log Limit

Edit `cmd/main.go` lines 107 and 115:
```go
unfilteredQuery := fmt.Sprintf(`%s(limit: 5, ...)  // Change limit
```

### Styling

Modify `static/styles.css` - all colors are defined as CSS variables at the top:
```css
:root {
    --accent-blue: #4a9eff;
    --accent-purple: #a855f7;
    --accent-green: #10b981;
    /* ... */
}
```

## Technology Stack

**Backend:**
- Go (HTTP server)
- DefraDB (CRDT database)
- libp2p (P2P networking)
- Server-Sent Events (real-time updates)

**Frontend:**
- HTML5
- CSS3 (with CSS Grid and Flexbox)
- Vanilla JavaScript (no frameworks!)
- Server-Sent Events API

## Development

### Project Structure

```
demoWebApp/
├── cmd/
│   └── main.go          # Web server and API
├── views/
│   └── view.go          # View definitions
├── static/
│   ├── index.html       # HTML page
│   ├── styles.css       # Styling
│   └── app.js           # Frontend logic
├── go.mod
├── go.sum
└── README.md
```

### Building

```bash
go build -o webdemo cmd/main.go
./webdemo
```

### Testing

Open multiple browser tabs to test real-time updates across different clients.

## Troubleshooting

### Port Already in Use

Change the port in `cmd/main.go` or kill the process using port 8080:
```bash
lsof -i :8080
kill -9 <PID>
```

### No Data Appearing

1. Check that indexer is running and indexing blocks
2. Verify host is connected and processing views
3. Look at the browser console for errors (F12)
4. Check the server logs for connection issues

### Connection Drops

The app automatically reconnects after 5 seconds. Check your network connection and ensure the server is still running.

### Styling Issues

Clear your browser cache or do a hard refresh:
- Chrome/Firefox: `Ctrl+Shift+R` (or `Cmd+Shift+R` on Mac)
- Safari: `Cmd+Option+R`

## Browser Compatibility

Tested and working on:
- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+

Requires:
- ES6 JavaScript support
- CSS Grid support
- EventSource API (Server-Sent Events)

## Performance

- **Low CPU Usage**: Efficient SSE streaming
- **Minimal Bandwidth**: Only sends data when it changes
- **No Polling**: Uses push-based updates instead of polling
- **Lightweight**: ~50KB total (HTML + CSS + JS)

## Learn More

- [Server-Sent Events](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events)
- [Shinzo Documentation](https://docs.source.network)
- [DefraDB](https://github.com/sourcenetwork/defradb)

## License

Same as parent project.

---

Made with ❤️ using Shinzo Network


